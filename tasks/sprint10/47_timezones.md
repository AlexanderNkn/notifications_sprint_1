## Учет таймзоны в нотификациях

Сообщения должны уходить пользователю с учетом его таймзоны и/или настроек в личном кабинете, когда он может принимать сообщения. Сервис нотификаций при наступлении события в первую очередь обращается в auth, за данными пользователей, которым нужно выслать оповещения.
При подготовке сообщения, функции-обработчик должна проверять, можно ли отправить сейчас, либо отложить.
Данные пользователей, которым можно отправить сейчас, передаются в очередь rabbitmq. Данные остальных пользователей группируются в списки в соответствии с временем отправки. К примеру может получиться 3 списка пользователей - первый оправляем сейчас, второй через 2 часа, третий через 5. 
Списки для отложенной отправки помещаются в redis, в качестве ключа использовать сгенеренный uuid для повторяемой задачи.
Сообщение с задачей на повтор и с указанием отложенного времени, сервис нотификаций помещает в шину событий. Шедулер забирает задачу из шины событий и спустя отложенное время запускает. Например сервис нотификаций может запросить выполнение задачи "еженедельное напоминание" через 3 часа, так как часть пользователей находится не в той таймзоне. Шедулер через 3 часа опять поставит задачу "еженедельное напоминание" в шину событий, но на этот раз добавит ключ от redis со списком клиентов. И функция обработчик в сервисе нотификаций уже не будет запрашивать данные пользователя в auth, а возьмет их из redis и сразу поставит в очередь rabbitmq на исполнение.

Оценка 8
